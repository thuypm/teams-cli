webpackJsonp([1],{0:function(t,e){},1:function(t,e){},"1qmb":function(t,e){},2:function(t,e){},Auol:function(t,e){},CKjX:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=s("VU/8")({name:"App"},n,!1,function(t){s("jXZJ")},null,null).exports,o=s("/ocq"),c=s("mtWM"),l=s.n(c),u={data:function(){return{uri:window.location.pathname,username:localStorage.username,userAvatar:null,axiosConfig:{headers:{"Content-Type":"application/json;charset=UTF-8",token:localStorage.token}}}},mounted:function(){document.getElementById("setAvatar").addEventListener("click",function(){document.getElementById("selectAvatar").click()})},methods:{imgChange:function(t){var e=t.target.files[0],s=new FormData;s.append("avatar",e),s.append("username",this.username),l.a.post("http://localhost:3000/user/avatar",s,this.axiosConfig).then(function(t){console.log(t)})},signout:function(){localStorage.clear(),window.location.href="/"}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-side-menu"},[s("div",{staticClass:"brand"},[t._v("TEAMS")]),t._v(" "),s("div",{staticClass:"menu-list"},[s("ul",{staticClass:"menu-content collapse out",attrs:{id:"menu-content"}},[s("li",{class:{active:"/chat"==t.uri}},[t._m(0)]),t._v(" "),s("li",{class:{active:"/allGroup"==t.uri}},[t._m(1)]),t._v(" "),s("li",{class:{active:"/file"==t.uri}},[t._m(2)])])]),t._v(" "),s("div",{staticClass:"menu-footer"},[s("ul",[s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"selectAvatar",accept:"image/*"},on:{change:t.imgChange}}),t._v(" "),s("img",{staticClass:"rounded-circle user_img_msg",attrs:{src:"http://localhost:3000/user/"+t.username+".jpg"}}),t._v(" "),t._m(3),t._v(" "),s("li",{on:{click:function(e){return t.signout()}}},[t._m(4)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"/chat"}},[e("div",[e("i",{staticClass:"fa fa-envelope fa-lg"})]),this._v(" "),e("span",[this._v("Hộp thư")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"/allGroup"}},[e("div",[e("i",{staticClass:"fa fa-users fa-lg"})]),this._v(" "),e("span",[this._v("Nhóm")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"/file"}},[e("div",[e("i",{staticClass:"fa fa-file fa-lg"})]),this._v(" "),e("span",[this._v("File")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"setAvatar"}},[e("i",{staticClass:"fa fa-camera"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"#"}},[e("div",[e("i",{staticClass:"fa fa-sign-out-alt fa-lg"})]),this._v(" "),e("span",[this._v("Đăng xuất")])])}]};var m=s("VU/8")(u,d,!1,function(t){s("emMp")},"data-v-237bdf56",null).exports,p={components:{Header:m}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-1custom"},[e("Header")],1),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"center",width:"100%"}},[e("h1",[this._v("Hãy chờ chúng tôi có thêm thời gian để phát triển")])])}]},f=s("VU/8")(p,h,!1,null,null,null).exports,v={name:"signin",data:function(){return{error:!1,messErr:"",formData:{username:"",password:""}}},methods:{signin:function(){var t=this;return this.formData.username.length<5?(this.messErr="username tối thiểu 5 ký tự",this.error=!0,!1):this.formData.password.length<5?(this.messErr="password tối thiểu 5 ký tự",this.error=!0,!1):void l.a.post("http://localhost:3000/signin",this.formData).then(function(e){e.data?(t.error=!1,localStorage.setItem("token",e.data.token),localStorage.setItem("username",e.data.username),localStorage.setItem("meeting",e.data.meeting),localStorage.setItem("avatar",e.data.avatar),t.$router.replace("/")):(t.messErr="Tên tài khoản hoặc mật khẩu không đúng",t.error=!0)})},signup:function(){this.$router.push("/signup")}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"card card-container"},[s("img",{staticClass:"profile-img-card",attrs:{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png"}}),t._v(" "),s("p",{staticClass:"profile-name-card",attrs:{id:"profile-name"}}),t._v(" "),s("form",{staticClass:"form-signin"},[s("span",{staticClass:"reauth-email",attrs:{id:"reauth-email"}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.formData.username},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signin(e)},input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.formData.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signin(e)},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),t._m(0),t._v(" "),s("strong",[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.error,expression:"error == true"}],staticClass:"alert alert-danger",staticStyle:{"text-align":"center",padding:"0",border:"0"}},[t._v(t._s(t.messErr))])]),t._v(" "),s("button",{staticClass:"btn btn-lg btn-primary btn-block btn-signin",attrs:{type:"button"},on:{click:t.signin}},[t._v("Sign in")])]),t._v(" "),s("a",{staticClass:"forgot-password",attrs:{href:""}},[t._v("\n        Forgot the password?\n    ")]),t._v(" "),s("button",{staticClass:"btn btn-lg btn-success btn-block btn-signup",attrs:{type:"button"},on:{click:t.signup}},[t._v("Sign up")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"checkbox",attrs:{id:"remember"}},[e("label",[e("input",{attrs:{type:"checkbox",value:"remember-me"}}),this._v(" Remember me\n            ")])])}]};var _,C=s("VU/8")(v,g,!1,function(t){s("1qmb")},"data-v-0d67ec6e",null).exports,b={props:["groupJoin"],data:function(){return{axiosConfig:{headers:{"Content-Type":"application/json;charset=UTF-8",token:localStorage.token}},listUserSearch:[],username:localStorage.username,listUserPush:[],nameOfGroup:"",userSearch:"",notFind:1}},methods:{findUser:function(){var t=this;this.notFind=1,_&&clearTimeout(_),_=setTimeout(function(){t.findServer()},700)},findServer:function(){var t=this;this.listUserSearch=[],this.userSearch.trim()?l.a.post("http://localhost:3000/user/search",{username:this.userSearch},this.axiosConfig).then(function(e){var s=[];for(var a in e.data)e.data[a].username!=t.username&&(t.groupJoin?-1==t.listUserPush.indexOf(e.data[a].username)&&-1==t.groupJoin.members.indexOf(e.data[a].username)&&s.push(e.data[a].username):-1==t.listUserPush.indexOf(e.data[a].username)&&s.push(e.data[a].username));t.listUserSearch=s,t.notFind=s.length}):this.listUserSearch=[]},addUser:function(t){this.userSearch="",this.listUserPush.push(t),this.listUserSearch=[]},submit:function(){var t,e=this;t=this.groupJoin?{roomId:this.groupJoin._id,members:this.listUserPush,action:1}:{owner:this.username,name:this.nameOfGroup,members:this.listUserPush,action:0},l.a.post("http://localhost:3000/room/editRoom",t,this.axiosConfig).then(function(t){t.data&&e.$emit("editGroup",t.data)})},remove:function(t){this.listUserPush.splice(this.listUserPush.indexOf(t))}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[t._t("header",[t.groupJoin?t._e():s("input",{directives:[{name:"model",rawName:"v-model",value:t.nameOfGroup,expression:"nameOfGroup"}],staticClass:"form-data",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"Tên nhóm"},domProps:{value:t.nameOfGroup},on:{input:function(e){e.target.composing||(t.nameOfGroup=e.target.value)}}}),t._v(" "),t.groupJoin?s("h6",{staticStyle:{"text-align":"center"}},[t._v("Nhóm: "),s("b",[t._v(t._s(t.groupJoin.name))])]):t._e()])],2),t._v(" "),s("div",{staticClass:"modal-body"},[t._t("body",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userSearch,expression:"userSearch"}],staticClass:"form-data",attrs:{type:"text",placeholder:"Thêm người"},domProps:{value:t.userSearch},on:{keyup:function(e){return t.findUser()},input:function(e){e.target.composing||(t.userSearch=e.target.value)}}}),t._v(" "),t.userSearch?s("div",{staticClass:"arrUsr"},[t.notFind?t._e():s("p",[t._v("Không tìm thấy hoặc người này đã thêm")]),t._v(" "),t._l(t.listUserSearch,function(e,a){return s("p",{key:a,staticClass:"usr-in",on:{click:function(s){return t.addUser(e)}}},[t._v(t._s(e))])})],2):t._e(),t._v(" "),s("div",{staticClass:"listUser"},t._l(t.listUserPush,function(e,a){return s("span",{key:a,staticClass:"user-in",on:{click:function(e){return t.listUserPush.splice(a,1)}}},[t._v(t._s(e)+" "),s("i",{staticClass:"fa fa-trash"})])}),0)])],2),t._v(" "),s("div",{staticClass:"modal-footer"},[t._t("footer",[s("button",{staticClass:"btn btn-dark",attrs:{id:"cls"},on:{click:function(e){return t.$emit("close",!1)}}},[t._v("\n                              Close\n                          ")]),t._v(" "),s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.submit()}}},[t._v("\n                              Submit\n                          ")])])],2)])])])},staticRenderFns:[]};var y={components:{Header:m,editGroup:s("VU/8")(b,k,!1,function(t){s("CKjX")},"data-v-77a4b548",null).exports},data:function(){return{showNotice:"",axiosConfig:{headers:{"Content-Type":"application/json;charset=UTF-8",token:localStorage.token}},username:localStorage.username,showModal:!1,groupCode:"",groupJoin:Object,groups:[]}},created:function(){this.loadData()},methods:{deleteGroup:function(t,e){},Notice:function(t){var e=this;this.showNotice=t,setTimeout(function(){e.showNotice=""},2e3)},join:function(){var t=this,e={action:1,roomId:this.groupCode,members:[this.username]};-1==this.groups.findIndex(function(e){return e._id==t.groupCode})?l.a.post("http://localhost:3000/room/editRoom",e,this.axiosConfig).then(function(e){e.data?(t.Notice("Thành Công"),t.groups.push(e.data)):t.Notice("Không tìm thấy nhóm này")}):this.Notice("Bạn đã join nhóm này")},editGroup:function(t){var e=this.groups.findIndex(function(e){return e._id===t._id});-1!=e?this.groups[e]=t:this.groups.push(t),this.showModal=!1,this.Notice("thành công")},loadData:function(){var t=this;l.a.post("http://localhost:3000/user/getAllMeeting",{username:this.username},this.axiosConfig).then(function(e){t.groups=e.data.content})}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-1custom"},[s("Header")],1),t._v(" "),s("editGroup",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],attrs:{groupJoin:t.groupJoin},on:{editGroup:t.editGroup,close:function(e){t.showModal=!1}}}),t._v(" "),t.showNotice?s("div",{staticClass:"notice"},[s("h3",{staticStyle:{"padding-top":"20px"}},[t._v(t._s(t.showNotice))])]):t._e(),t._v(" "),s("div",{staticClass:"col-11custom"},[s("div",{staticClass:"row"},[s("div",{staticClass:"d-flex flex-row-reverse"},[s("div",{staticClass:"p-2"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.showModal=!0,t.groupJoin=null}}},[s("i",{staticClass:"fa fa-plus"}),t._v(" Tạo nhóm mới\n          ")])]),t._v(" "),s("div",{staticClass:"p-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.groupCode,expression:"groupCode"}],staticStyle:{padding:".375rem .75rem",margin:"0"},attrs:{type:"text",placeholder:"Nhập code nhóm"},domProps:{value:t.groupCode},on:{input:function(e){e.target.composing||(t.groupCode=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-outline-success",on:{click:function(e){return t.join()}}},[s("i",{staticClass:"fa fa-user"}),t._v(" Tham gia\n          ")])])])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-around",staticStyle:{"flex-wrap":"wrap"}},t._l(t.groups,function(e,a){return s("div",{key:a,staticClass:"card",staticStyle:{width:"18rem"}},[e.owner==t.username?s("div",{staticStyle:{position:"absolute",right:"0"},on:{click:function(s){return t.deleteGroup(e,a)}}},[t._m(0,!0)]):t._e(),t._v(" "),s("div",[s("img",{staticClass:"card-img-top",attrs:{src:"http://localhost:3000/room/"+e._id+"/"+e._id+".jpg",alt:"Card image cap"}}),t._v(" "),s("span")]),t._v(" "),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(e.name))]),t._v(" "),s("button",{staticClass:"btn btn-outline-success",on:{click:function(s){t.groupJoin=e,t.showModal=!0}}},[s("i",{staticClass:"fa fa-plus"})]),t._v(" "),s("a",{staticClass:"btn btn-outline-dark",attrs:{href:"/meeting/"+e._id}},[s("b",[t._v("Họp")])]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger",on:{click:function(s){return t.leaveGroup(e,a)}}},[s("i",{staticClass:"fa fa-times"})])])])}),0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-outline-danger"},[e("i",{staticClass:"fa fa-trash"})])}]};var x=s("VU/8")(y,w,!1,function(t){s("hADx")},"data-v-6cc1ded2",null).exports,S={name:"lol",data:function(){return{error:!1,messErr:"",formData:{username:"",password:"",rePassword:"",name:""}}},methods:{signup:function(){var t=this;return this.formData.username.length<5?(this.messErr="username tối thiểu 5 ký tự",this.error=!0,!1):this.formData.password.length<5?(this.messErr="password tối thiểu 5 ký tự",this.error=!0,!1):0==this.formData.name.length?(this.messErr="tên của bạn đâu ?",this.error=!0,!1):this.formData.password!=this.formData.rePassword?(this.messErr="Nhập lại mật khẩu không đúng",this.error=!0,!1):void l.a.post("http://localhost:3000/signup",{username:this.formData.username,password:this.formData.password,name:this.formData.name}).then(function(e){200==e.status?e.data.content?(t.error=!1,alert("đăng ký thành công, bây giờ hãy đăng nhập"),t.$router.push("/signin")):(t.messErr="Username đã được sử dụng",t.error=!0):alert("có lỗi, vui lòng f5")})},signin:function(){this.$router.push("/signin")}}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"card card-container"},[t._m(0),t._v(" "),s("form",{staticClass:"form-signin"},[s("span",{staticClass:"reauth-email",attrs:{id:"reauth-email"}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"form-control",attrs:{type:"text",id:"username_up",placeholder:"Username"},domProps:{value:t.formData.username},on:{input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"Tên của bạn"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",attrs:{type:"password",id:"password_up",placeholder:"Password"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.rePassword,expression:"formData.rePassword"}],staticClass:"form-control",attrs:{type:"password",id:"repass",placeholder:"Nhập lại Password"},domProps:{value:t.formData.rePassword},on:{input:function(e){e.target.composing||t.$set(t.formData,"rePassword",e.target.value)}}}),t._v(" "),s("strong",[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.error,expression:"error == true"}],staticClass:"alert alert-danger",staticStyle:{"text-align":"center",padding:"0",border:"0"},attrs:{id:"error2"}},[t._v(t._s(t.messErr))])]),t._v(" "),s("button",{staticClass:"btn btn-lg btn-primary btn-block btn-signin",attrs:{id:"signup",type:"button"},on:{click:t.signup}},[t._v("Sign up")])]),t._v(" "),s("a",{staticClass:"forgot-password",attrs:{href:"#"}},[t._v("\r\n                        login with google ?\r\n                    ")]),t._v(" "),s("button",{staticClass:"btn btn-lg btn-success btn-block btn-signup",attrs:{id:"signin",type:"button"},on:{click:t.signin}},[t._v("Sign in")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticStyle:{"text-align":"center"}},[e("b",[this._v("SIGN UP")])])}]};var U=s("VU/8")(S,D,!1,function(t){s("ViUn")},"data-v-05bf8503",null).exports,E={components:{Header:m}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-1custom"},[e("Header")],1),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"center",width:"100%"}},[e("h1",[this._v("Hãy chờ chúng tôi có thêm thời gian để phát triển")])])}]},$=s("VU/8")(E,I,!1,null,null,null).exports,F=s("Dd8w"),O=s.n(F),P=s("2OTh"),N=[],j=[],T={props:["roomId","socket"],name:"index",data:function(){return{username:localStorage.username,listFriend:[],listCli:[],camera:!1,micro:!1,chatOpt:0,listOpt:0,videoUser:"",listVideo:[],screen:""}},created:function(){var t=this;this.screen="http://localhost:3000/user/"+this.username+".jpg",this.socket.on("screen",function(e,s){e!=t.socket.id&&(t.screen=s)}),this.socket.on("stopScreen",function(e){e!=t.socket.id&&(t.screen="http://localhost:3000/user/"+t.username+".jpg")}),this.socket.on("exitUser",function(e){t.screen="http://localhost:3000/user/"+t.username+".jpg";var s=t.listCli.findIndex(function(t){return t.Id==e});t.listCli.splice(s,1);var a=t.listFriend.findIndex(function(t){return t.Id==e});-1!=a&&(t.listFriend.splice(a,1),N.splice(a,1),j.splice(a,1));var n=t.listVideo.findIndex(function(t){return t.Id==e});-1!=n&&(j[n].destroy(),t.listVideo.splice(n,1),N.splice(n,1),j.splice(n,1))}),this.socket.on("newUser",function(e,s,a){if(a!=t.socket.id){var n={username:s,Id:a};if(t.listCli.push(O()({},n)),t.listFriend.push(n),t.videoUser){var i=N.push(new P({initiator:!0,trickle:!1,stream:t.videoUser}));N[i-1].on("error",function(t){N.splice(i-1,1)}),N[i-1].on("signal",function(e){t.socket.emit("onVideo",a,e)})}}else t.listFriend=e.slice(0,e.length),t.listCli=e.slice(0,e.length)}),this.socket.on("onVideo",function(e,s){if(s!=t.socket.id){var a=t.listFriend.findIndex(function(t){return t.Id==s});t.listFriend.splice(a,1);var n=j.push(new P({trickle:!1}));j[n-1].signal(e),j[n-1].on("signal",function(e){t.socket.emit("res_video",s,e)}),j[n-1].on("stream",function(e){t.listVideo.push({stream:e,Id:s})}),j[n-1].on("error",function(t){j.splice(n-1,1),console.log("error",t)})}}),this.socket.on("res_video",function(e,s){if(e!=t.socket.id){var a=t.listCli.findIndex(function(t){return t.Id==e});N[a].signal(s)}}),this.socket.on("offVideo",function(e){if(t.socket.id!=e.Id){var s=t.listVideo.findIndex(function(t){return t.Id==e.Id});-1!=s&&(t.listVideo.splice(s,1),j.splice(s,1),t.listFriend.push(e))}})},methods:{shareScreen:function(){var t=this;navigator.mediaDevices.getDisplayMedia({audio:!1,video:!0,cursor:"always"}).then(function(e){var s=document.createElement("video");s.autoplay=!0,s.srcObject=e;var a=document.getElementById("canvas");a.width=960,a.height=540;var n=a.getContext("2d");n.width=a.width,n.height=a.height;var i=setInterval(function(){n.drawImage(s,0,0,n.width,n.height);var r=a.toDataURL("image/webp");t.socket.emit("screen",t.roomId,r),e.active||(t.socket.emit("stopScreen",t.roomId),clearInterval(i))},70)}).catch(function(t){return console.log(t)})},setVideo:function(t,e){var s=this;this.camera=t,this.micro=e,this.videoUser&&(this.socket.emit("offVideo",this.socket.id,this.roomId),N.forEach(function(t,e){t.destroy()}),N=[]),t||e?navigator.mediaDevices.getUserMedia({audio:e,video:t}).then(function(t){s.videoUser=t,s.listCli.forEach(function(t,e){N[e]=new P({initiator:!0,trickle:!1,stream:s.videoUser}),N[e].on("signal",function(a){s.socket.emit("onVideo",t.Id,a),N[e].on("error",function(t){N.splice(i-1,1)})})})}).catch(function(t){return console.log(t)}):(this.videoUser.getTracks().forEach(function(t){t.stop()}),this.videoUser=null)},changeOpt:function(t){1==t&&(this.chatOpt=1-this.chatOpt,this.listOpt=0,this.$emit("changeOpt",this.chatOpt)),2==t&&(this.listOpt=2-this.listOpt,this.chatOpt=0,this.$emit("changeOpt",this.listOpt))}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("canvas",{staticStyle:{display:"none"},attrs:{id:"canvas"}}),t._v(" "),s("div",{staticClass:"flex-fill screen",staticStyle:{background:"black"}},[s("img",{class:{"card-img-top":!0},staticStyle:{"object-fit":"contain"},attrs:{src:t.screen}}),t._v(" "),s("div",{staticStyle:{"z-index":"2"},attrs:{id:"menuCall"}},[s("span",{staticClass:"btn btn-success"},[t._v("30:20")]),t._v(" "),s("button",{staticClass:"btn mn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.setVideo(!t.camera,t.micro)}}},[s("i",{staticClass:"fa fa-lg",class:{"fa-video":t.camera,"fa-video-slash":!t.camera}})]),t._v(" "),s("button",{staticClass:"btn mn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.setVideo(t.camera,!t.micro)}}},[s("i",{staticClass:"fa fa-lg",class:{"fa-microphone":t.micro,"fa-microphone-slash":!t.micro}})]),t._v(" "),s("button",{staticClass:"btn mn btn-outline-dark",attrs:{type:"button"},on:{click:t.shareScreen}},[s("i",{staticClass:"fas fa-desktop fa-lg"})]),t._v(" "),s("button",{staticClass:"btn mn",class:{"btn-outline-dark":!t.chatOpt,"btn-dark":t.chatOpt},attrs:{type:"button"},on:{click:function(e){return t.changeOpt(1)}}},[s("i",{staticClass:"fas fa-comments fa-lg"})]),t._v(" "),s("button",{staticClass:"btn mn",class:{"btn-outline-dark":!t.listOpt,"btn-dark":t.listOpt},attrs:{type:"button"},on:{click:function(e){return t.changeOpt(2)}}},[s("i",{staticClass:"fa fa-user fa-lg"})]),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"row flex-row"},[s("div",{staticClass:"you vid"},[t.camera?s("video",{staticClass:"rounded",attrs:{id:"video",muted:"",autoplay:""},domProps:{srcObject:t.videoUser,muted:!0}}):s("div",[s("img",{staticClass:"usr_img rounded-circle",attrs:{src:"http://localhost:3000/user/"+t.username+".jpg"}}),t._v(" "),s("p",{staticStyle:{"padding-top":"15px",margin:"0"}},[t._v(t._s(t.username))])])]),t._v(" "),t._l(t.listVideo,function(t,e){return s("div",{key:e,staticClass:"vid"},[s("video",{staticClass:"rounded",attrs:{id:"video",autoplay:""},domProps:{srcObject:t.stream}})])}),t._v(" "),t._l(t.listFriend,function(e){return s("div",{key:e.Id,staticClass:"vid"},[s("div",[s("img",{staticClass:"usr_img rounded-circle",attrs:{src:"http://localhost:3000/user/"+e.username+".jpg"}}),t._v(" "),s("p",{staticStyle:{"padding-top":"15px",margin:"0"}},[t._v(t._s(e.username))])])])})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn mn btn-danger",attrs:{onclick:"location.href = '/';",type:"button"}},[e("i",{staticClass:"fa fa-phone fa-lg"})])}]};var M=s("VU/8")(T,V,!1,function(t){s("Auol")},"data-v-352ea8b2",null).exports,A={props:["roomId","socket"],name:"index",components:{},data:function(){return{isActive:!1,selectMessID:"",friends:[],listMess:[],numberOfMess:Number,content:"",username:localStorage.username,typing:!1,fileSend:null}},mounted:function(){document.getElementById("chooseFile").addEventListener("click",function(){document.getElementById("selectFile").click()})},created:function(){var t=this;this.loadData(),this.socket.on("loadMess",function(e){t.typing=!1,t.listMess=e,t.$nextTick(function(){var t=document.getElementById("message");t.scrollTop=t.scrollHeight})}),this.socket.on("ib_mess",function(e){console.log("new mess"),t.listMess.push(e),t.$nextTick(function(){var t=document.getElementById("message");t.scrollTop=t.scrollHeight})})},filters:{renameFile:function(t){return t.slice(t.lastIndexOf("/")+1,t.length)},DAY:function(t){new Date;var e=new Date(t);return(t=e.getHours()+":"+e.getMinutes())+"  "+(e.getDate()+",th "+(e.getMonth()+1)+","+e.getFullYear())}},methods:{fileChange:function(t){var e=this,s=t.target.files,a=new FileReader;a.readAsDataURL(s[0]),a.onload=function(s){e.fileSend={name:t.target.files[0].name,content:s.target.result}}},loadData:function(){this.socket.emit("loadMess",this.roomId)},send:function(){var t=(new Date).getTime();(""!=this.content.trim()||this.fileSend)&&(this.fileSend?this.socket.emit("send_mess",this.roomId,this.fileSend.content,{type:"text",content:this.content.trim(),sender:this.username,time:t}):this.socket.emit("send_mess",this.roomId,null,{type:"text",content:this.content.trim(),sender:this.username,time:t}),this.content="",this.fileSend=null)},areTyping:function(t){}}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-body msg_card_body flex-fill",attrs:{id:"message"}},[t._l(t.listMess,function(e,a){return s("div",{key:a},[e.sender==t.username?s("div",{staticClass:"d-flex justify-content-end mb-4"},["data:image"==e.type?s("div",{staticClass:"msg_cotainer_send"},[s("img",{staticStyle:{"max-width":"160px"},attrs:{src:"http://localhost:3000/"+e.content,alt:""}}),t._v(" "),s("span",{staticClass:"msg_time_send"},[t._v(t._s(t._f("DAY")(e.time)))])]):s("div",{staticClass:"msg_cotainer_send"},["text"!=e.type?s("a",{attrs:{href:"http://localhost:3000/"+e.content,target:"_blank"}},[s("i",{staticClass:"fa fa-file",staticStyle:{color:"white"}}),t._v("\n          "+t._s(t._f("renameFile")(e.content))+"\n          ")]):s("p",[t._v(" "+t._s(e.content))]),t._v(" "),s("span",{staticClass:"msg_time_send"},[t._v(t._s(t._f("DAY")(e.time)))])]),t._v(" "),s("div",{staticClass:"img_cont_msg"},[s("img",{staticClass:"rounded-circle user_img_msg",attrs:{src:"http://localhost:3000/user/"+e.sender+".jpg"}})])]):s("div",{staticClass:"d-flex justify-content-start mb-4"},[s("div",{staticClass:"t_mimg_consg"},[s("img",{staticClass:"rounded-circle user_img_msg",attrs:{src:"http://localhost:3000/user/"+e.sender+".jpg"}})]),t._v(" "),"data:image"==e.type?s("div",{staticClass:"msg_cotainer"},[s("img",{staticStyle:{"max-width":"160px"},attrs:{src:"http://localhost:3000/"+e.content,alt:""}}),t._v(" "),s("span",{staticClass:"msg_time"},[t._v(t._s(t._f("DAY")(e.time)))])]):s("div",{staticClass:"msg_cotainer"},["text"!=e.type?s("a",{attrs:{href:"http://localhost:3000/"+e.content,target:"_blank"}},[s("i",{staticClass:"fa fa-file",staticStyle:{color:"black"}}),t._v("\n          "+t._s(t._f("renameFile")(e.content))+"\n          ")]):s("p",[t._v(" "+t._s(e.content))]),t._v(" "),s("span",{staticClass:"msg_time"},[t._v(t._s(t._f("DAY")(e.time)))])])])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.typing,expression:"typing"}]},[t._m(0)])],2),t._v(" "),s("div",{staticClass:"card-footer"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-append",attrs:{id:"chooseFile"}},[s("span",{staticClass:"input-group-text attach_btn"},[s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"selectFile"},on:{change:t.fileChange}}),t._v(" "),s("i",{staticClass:"fa fa-paperclip"})])]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control type_msg",attrs:{name:"",placeholder:"Type your message..."},domProps:{value:t.content},on:{keyup:[function(e){return t.areTyping(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)}],input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append",on:{click:t.send}},[t._m(1)])]),t._v(" "),t.fileSend?s("div",{staticClass:"preview",staticStyle:{position:"absolute","z-index":"56",bottom:"60px",background:"#fff",width:"100%",padding:"15px 5px 15px 5px"}},[s("div",{staticStyle:{color:"red",position:"absolute",right:"5px",padding:"3px",top:"0"},attrs:{id:"removeFile"},on:{click:function(e){t.fileSend=null}}},[s("i",{staticClass:"fa fa-times"})]),t._v(" "),s("b",[s("i",{staticClass:"fa fa-file"}),t._v("\n        "+t._s(t.fileSend.name)+"\n      ")])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex justify-content-start mb-4"},[e("div",{staticClass:"msg_cotainer",staticStyle:{"background-color":"pink"}},[e("b",[this._v("Đang nhập.....")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-text send_btn"},[e("i",{staticClass:"fa fa-paper-plane"})])}]};var H=s("VU/8")(A,G,!1,function(t){s("w1D/")},"data-v-271b252b",null).exports,R={props:["roomId"],data:function(){return{axiosConfig:{headers:{"Content-Type":"application/json;charset=UTF-8",token:localStorage.token}},micro:!1,members:[]}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;l.a.post("http://localhost:3000/room/getRoom",{roomId:this.roomId},this.axiosConfig).then(function(e){t.members=e.data.members})}}},J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[t._m(0),t._v(" "),s("ul",{staticClass:"contacts"},t._l(t.members,function(e,a){return s("li",{key:a,attrs:{id:e.username}},[s("div",{staticClass:"d-flex bd-highlight"},[s("div",{staticClass:"img_cont "},[s("img",{staticClass:"rounded-circle user_img",attrs:{src:"http://localhost:3000/user/"+e+".jpg"}}),t._v(" "),s("span",{staticClass:"online_icon"})]),t._v(" "),s("div",{staticClass:"user_info"},[s("span",[t._v(t._s(e))])]),t._v(" "),t._m(1,!0)])])}),0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{padding:"3px"}},[e("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Tìm ai đó"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ml-auto",staticStyle:{"padding-top":"5px"}},[e("button",{staticClass:"btn btn-outline-secondary"},[e("i",{staticClass:"fa fa-microphone"})]),this._v(" "),e("button",{staticClass:"btn btn-outline-danger"},[e("i",{staticClass:"fa fa-trash"})])])}]};var B=s("VU/8")(R,J,!1,function(t){s("kktH")},"data-v-70ea6a31",null).exports,L=s("DmT9").connect("http://localhost:3000"),Y={name:"index",components:{Header:m,Chat:H,Video:M,ListUser:B},created:function(){this.socket.emit("join",this.username,this.$route.params.id)},data:function(){return{option:0,socket:L,username:localStorage.username}}},K={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-1custom"},[s("Header")],1),t._v(" "),s("div",{class:{"col-9custom":t.option,"col-11custom":!t.option}},[s("Video",{attrs:{socket:t.socket,roomId:t.$route.params.id},on:{changeOpt:function(e){t.option=e}}})],1),t._v(" "),s("div",{staticClass:" col-2custom"},[1==t.option?s("Chat",{attrs:{socket:t.socket,roomId:t.$route.params.id}}):t._e(),t._v(" "),2==t.option?s("ListUser",{attrs:{socket:t.socket,roomId:t.$route.params.id}}):t._e()],1)])},staticRenderFns:[]};var X=s("VU/8")(Y,K,!1,function(t){s("b6ld")},null,null).exports;a.a.use(o.a);var q=new o.a({mode:"history",routes:[{path:"/",name:"index",component:x},{path:"/chat",name:"chat",component:f},{path:"/signin",name:"signin",component:C},{path:"/allGroup",name:"allGroup",component:x},{path:"/signup",name:"signup",component:U},{path:"/file",name:"file",component:$},{path:"/meeting/:id",name:"meeting",component:X}]});q.beforeEach(function(t,e,s){switch(t.fullPath){case"/signin":void 0!=localStorage.token?s("/"):s();break;case"/signup":void 0!=localStorage.token?(alert("vui lòng đăng xuất trước"),s("/")):s();break;default:void 0!=localStorage.token?s():s("/signin")}});var z=q;a.a.config.productionTip=!1,new a.a({el:"#app",router:z,components:{App:r},template:"<App/>"})},ViUn:function(t,e){},b6ld:function(t,e){},emMp:function(t,e){},hADx:function(t,e){},jXZJ:function(t,e){},kktH:function(t,e){},"w1D/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.797dbf4a032469f74fc8.js.map